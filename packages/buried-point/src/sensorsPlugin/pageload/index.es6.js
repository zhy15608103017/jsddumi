var sdkversion_placeholder="1.25.1";function wrapPluginInitFn(e,n,t){if(n&&(e.plugin_name=n),t&&e.init){var r=e.init;e.init=function(n,i){if(n.readyState&&n.readyState.state>=3||!n.on)return o();function o(){r.call(e,n,i)}n.on(t,o)}}return e}function createPlugin(e,n,t){return wrapPluginInitFn(e,n,t),e.plugin_version=sdkversion_placeholder,e}var eventSent=!1,PageLoad={init:function(e,n){function t(){var r=0,i=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance,o={$url:e._.getURL(),$title:document.title,$url_path:e._.getURLPath(),$referrer:e._.getReferrer(null,!0)};if(i?(r=function(n){var t=0;return e._.isFunction(n.getEntriesByType)&&(t=((n.getEntriesByType("navigation")||[{}])[0]||{}).domContentLoadedEventEnd||0),t}(i)||function(n){var t=0;if(n.timing){var r=n.timing;0!==r.fetchStart&&e._.isNumber(r.fetchStart)&&0!==r.domContentLoadedEventEnd&&e._.isNumber(r.domContentLoadedEventEnd)?t=r.domContentLoadedEventEnd-r.fetchStart:e.log("performance \u6570\u636e\u83b7\u53d6\u5f02\u5e38")}return t}(i),function(n,t){if(n.getEntries&&"function"==typeof n.getEntries){for(var r=n.getEntries(),i=null,o=0;o<r.length;o++)"transferSize"in r[o]&&(i+=r[o].transferSize);e._.isNumber(i)&&i>=0&&i<10737418240&&(t.$page_resource_size=Number((i/1024).toFixed(3)))}}(i,o)):e.log("\u6d4f\u89c8\u5668\u672a\u652f\u6301 performance API."),r>0){var a=e._.isObject(n)&&n.max_duration||1800;r=Number((r/1e3).toFixed(3)),(!e._.isNumber(a)||a<=0||r<=a)&&(o.event_duration=r)}eventSent||(e.track("$WebPageLoad",o),eventSent=!0),window.removeEventListener?window.removeEventListener("load",t):window.detachEvent&&window.detachEvent("onload",t)}"complete"==document.readyState?t():window.addEventListener?window.addEventListener("load",t):window.attachEvent&&window.attachEvent("onload",t)}},index=createPlugin(PageLoad,"PageLoad","sdkReady");export default index;